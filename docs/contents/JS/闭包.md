## 什么是闭包？
函数 A 返回了一个函数 B，并且函数 B 中使用了函数 A 的变量，函数 B 就被称为闭包。闭包会一直占用内存空间，导致内存泄漏

<br/>

## 内存泄漏 VS 内存溢出
内存溢出：是指程序在申请内存时，没有足够的内存空间供其使用

内存泄漏：指申请的内存一直得不到释放，GC（垃圾回收机制）回收不了，过多的内存泄露会导致内存溢出

<br/>

## 怎样避免内存溢出？
* 尽量少使用全局变量，避免全局变量的泛滥，使用一个变量要先定义
* 使用全局变量保存大量数据时，确保用完以后设置为 <code>null</code> 
* 定时器不再需要时确保清除
* 清除绑定在 DOM 上的事件
* 用一个变量来引用 DOM 时，用完则脱离对这个 DOM 的引用，即置为 <code>null</code>
* 在形成闭包的外部函数的最后，将在内部函数使用的变量赋值为 <code>null</code>，避免多次调用外部函数，形成多个闭包，造成严重的内存泄漏

<br/>

## 如何释放闭包？
因为闭包是引用导致的，所以只有当闭包函数被回收掉了，闭包内引用的变量才会被 GC 回收，可以直接把闭包函数直接置为 <code>null</code> 来促使 GC 回收

<br/>

## 闭包的使用场景
* 缓存数据
* 封装私有变量
* 模拟块级作用域
* 立即执行函数
* 防抖和节流、函数柯里化

<br/> 

## 经典面试题
以下代码会打印出什么
```js
for(var i = 0; i < 5; i++) {
  setTimeout(function(){
    console.log(i) // 5个5
  }, 0)
}
```

如何依次打印出0 1 2 3 4?

方法1：利用闭包缓存变量
```js
for(var i = 0; i < 5; i++) {
  (function(i) {
    setTimeout(function(){
      console.log(i)
    }, 0)
  })(i)
}
```
方法2：利用setTimeout的第三个参数
```js
for(var i = 0; i < 5; i++) {
    setTimeout(function(i){
      console.log(i)
    }, 0, i)
}
```